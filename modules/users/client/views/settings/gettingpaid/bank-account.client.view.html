<section class="row" ng-controller="BankAccountController">
  <div class="col-md-8 col-md-offset-2" >
    <form class="form company" name="form" ng-if="accountLoaded" ng-submit="validate(form)"  novalidate>
      <div class="panel panel-default">
        <div class="panel-heading">Your current bank account</div>
        <div class="panel-body">
          <div>
            <p><label>Bank Name:</label> {{external_account.bank_name}}</p>
            <p><label>Routing Number:</label> {{external_account.routing_number}}</p>
            <p><label>Last 4 digits of Account Number:</label> {{external_account.last4}}</p>
          </div>
        </div>

      </div>
      <div ng-hide="accountUpdated">
        <h3>Enter your new bank account</h3>
        <p class="explanation bank_extra">Must be a checking account.</p>
        <div class="form-group"  show-errors>
          <label class="control-label" for="account_number">Routing number:</label>
          <input data-number-type="routing" class="routing form-control" name="routing_number"
          ng-model="external_account.routing_number" placeholder="111000000" type="text" required >
        </div>
        <div class="form-group"  show-errors>
          <label class="control-label" for="account_number">Account number:</label>
          <input class="form-control" name="account_number" autocomplete="off" placeholder=""
          ng-model="external_account.account_number" maxlength="34" type="text" required>
          <div ng-if="form.account_number.$error && submitted" ng-messages="form.account_number.$error" role="alert">
            <p class="help-block error-text" ng-message="required">required</p>
          </div>
        </div>
        <div class="form-group"  show-errors>
          <label class="control-label" for="account_number">Confirm account number:</label>
          <input class="form-control" name="account_number_validate" autocomplete="off" placeholder="" equals="{{external_account.account_number}}"  ng-model="account_number_validate" maxlength="34" type="text" required>
          <div ng-if="form.account_number_validate.$error && submitted" ng-messages="form.account_number_validate.$error" role="alert">
            <p class="help-block error-text" ng-message="required">required</p>
          </div>
        </div>
        <div class="form-group text-right">
          <a ui-sref="settings.gettingpaid.account" class="btn btn-default btn-lg">Cancel</a> <button type="submit" class="btn btn-primary btn-lg">Update your Bank Account</button>
        </div>
      </div>
      <div class="alert alert-success" ng-if="accountUpdated"><p>Thank you! We are now processing your information and verifying your account.</p>
        <p class="text-right"><a ui-sref="settings.gettingpaid.account" class="btn btn-default btn-lg">Back</a></p>
      </div>
    </form>
  </div>
</section>
